<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunji.titanrtx.manager.dao.mapper.dubbo.DubboSceneMapper">



    <select id="selectAll"  resultType="com.yunji.titanrtx.manager.dao.entity.dubbo.DubboSceneEntity">
      SELECT * FROM dubbo_scene d  order by d.updateTime desc limit 200
    </select>


    <delete id="deleteById">
        delete from dubbo_scene where id = #{id}
    </delete>


    <select id="findById" resultType="com.yunji.titanrtx.manager.dao.entity.dubbo.DubboSceneEntity">
        SELECT * FROM dubbo_scene d where d.id = #{id}
    </select>


    <select id="searchScenes" resultType="com.yunji.titanrtx.manager.dao.entity.dubbo.DubboSceneEntity">
        select * from dubbo_scene d where d.name like CONCAT('%',#{key},'%') order by d.updateTime desc
    </select>


    <select id="selectSceneIds" resultType="java.lang.Integer">
        select d.id from dubbo_scene d where d.name like CONCAT('%',#{key},'%')  order by d.updateTime desc
    </select>



    <insert id="insert">
        insert into dubbo_scene (name,concurrent,total,timeout,throughPut,strategy,flow,status,idsWeight,sequence)
        values (#{name},#{concurrent},#{total},#{timeout},#{throughPut},#{strategy},#{flow},#{status},#{idsWeight},#{sequence})
    </insert>

    <update id="update">
        update dubbo_scene  d set
                                 d.name =#{name},
                                 d.concurrent = #{concurrent},
                                 d.total =#{total},
                                 d.timeout =#{timeout},
                                 d.throughPut =#{throughPut},
                                 d.strategy =#{strategy},
                                 d.flow =#{flow},
                                 d.idsWeight =#{idsWeight},
                                 d.sequence =#{sequence},
                                 d.updateTime = now()
        where d.id = #{id}
    </update>


    <update id="updateStatus">
        update dubbo_scene d set  d.status = #{status} , d.updateTime = now()
        where d.id = #{id}
    </update>

</mapper>

