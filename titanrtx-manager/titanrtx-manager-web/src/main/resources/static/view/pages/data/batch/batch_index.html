<div class="layui-row layui-col-space3 searchInputBackGroundWhite">
    <div class="layui-col-md3">
        <li class="layui-this customSearch">
            <input type="text" ng-keyup="enterEvent($event,this)" class="layui-input" ng-model="searchModel"
                   placeholder="批次名|ID">
        </li>
    </div>
    <div class="layui-col-md8">&nbsp;</div>
    <div class="layui-col-md1">
        <div class="layui-form-item">
            <div class="layui-input-block" style="margin-left: 0">
                <a class="layui-btn layui-btn-primary searchButton" ng-href="#/batchAddOrEdit">
                    <i class="layui-icon layui-icon-add-circle"></i> 新增批次
                </a>
            </div>
        </div>
    </div>
</div>

<div class="layui-row">
    <table class="layui-table tableCursor" lay-skin="line">
        <colgroup>
            <col>
            <col>
            <col>
            <col>
            <col>
            <col width=60>
            <col width="1">
            <col width="1">
            <col width="1">
        </colgroup>
        <thead>
        <tr>
            <th>ID</th>
            <th>批次名称</th>
            <th>参数总量</th>
            <th>时间</th>
            <th>状态</th>
            <th>操作</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="batchEntity in showModel">
            <td>{{batchEntity.id}}</td>
            <td>{{batchEntity.name}}</td>
            <td>{{batchEntity.dataTotal}}</td>
            <td>{{batchEntity.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            <td><i style="font-size:20px;cursor: pointer" class="layui-icon "
                   ng-class="batchEntity.status === 1 || batchEntity.status === 5 ? 'iconColor layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop':'layui-icon-play'"></i>
            </td>
            <td>
                <a ng-if="batchEntity.status === 0" class="layui-btn layui-btn-xs layui-btn-normal"
                   ng-click="batchStart(batchEntity.id,$index)">准备</a>
                <a ng-if="batchEntity.status === 1" class="layui-btn layui-btn-xs layui-btn-disabled">构造中</a>
                <a ng-if="batchEntity.status === 2" class="layui-btn layui-btn-xs layui-btn-warm"
                   ng-click="exportParams(batchEntity.id, $index)">导出</a>
                <a ng-if="batchEntity.status === 3" class="layui-btn layui-btn-xs layui-btn-danger"
                   ng-click="batchStart(batchEntity.id,$index)">重新构造</a>
                <a ng-if="batchEntity.status === 4" class="layui-btn layui-btn-xs layui-btn-normal"
                   ng-click="exportParams(batchEntity.id,$index)">再次导出</a>
                <a ng-if="batchEntity.status === 5"
                   class="layui-btn layui-btn-xs layui-btn-disabled">导出中</a>
                <a ng-if="batchEntity.status === 6"
                   class="layui-btn layui-btn-xs layui-btn-warm"
                   ng-click="exportParams(batchEntity.id, $index)">重新导出</a>
            </td>
            <td>
                <a class="layui-btn layui-btn-xs"
                   ng-click="addDispatch(batchEntity)">调度</a>
            </td>
            <td>
                <a class="layui-btn layui-btn-xs"
                   ng-class="batchEntity.status === 1 || batchEntity.status === 5?'layui-btn-disabled':''"
                   ng-click="goRoutePage('/batchAddOrEdit',{'id':batchEntity.id})">编辑</a>
            </td>
            <td>
                <a class="layui-btn layui-btn-xs layui-btn-danger"
                   ng-class="batchEntity.status === 1 || batchEntity.status === 5?'layui-btn-disabled':''"
                   ng-click="resetBatch(batchEntity.id, $index)">重置</a>
            </td>
            <td>
                <a class="layui-btn layui-btn-xs layui-btn-danger"
                   ng-class="batchEntity.status === 1 || batchEntity.status === 5?'layui-btn-disabled':''"
                   ng-click="delete(batchEntity.id,'batchDelete')">删除</a>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="layui-row" id="indexModelPage"></div>
</div>

<div id="addDispatchDialog" style="display: none">
    <blockquote class="layui-elem-quote layui-form" style="background-color: white;">
        <form class="layui-form">
            <div class="layui-form-item">
                <label class="layui-form-label" style="padding: 9px 0px">粒度选择：</label>
                <div class="layui-input-inline">
                    <select-plus list-model="gradingListModel" lay-filter="{{batchEntity.name+ $index}}"
                                 yj-model="selectedGrading"></select-plus>
                </div>
            </div>
            <div ng-if="selectedGrading.id == 'PRECISE'" class="layui-form-item" style="margin-top: 15px;">
                <label class="layui-form-label" style="padding: 9px 0px">调度时间：</label>
                <div class="layui-input-inline">
                    <input type="text" class="layui-input" id="executeTimePrecise" placeholder="yyyy-MM-dd HH:mm:ss">
                </div>
            </div>
            <div ng-if="selectedGrading.id == 'EVERYDAY'" class="layui-form-item" style="margin-top: 15px;">
                <label class="layui-form-label" style="padding: 9px 0px">调度时间：</label>
                <div class="layui-input-inline">
                    <input type="text" class="layui-input" id="executeTimeEveryday" placeholder="HH点mm分">
                </div>
            </div>
            <div ng-if="selectedGrading.id == 'EVERYHOUR'" class="layui-form-item" style="margin-top: 15px;">
                <label class="layui-form-label" style="padding: 9px 0px">调度时间：</label>
                <div class="layui-input-inline">
                    <input type="text" class="layui-input" id="executeTimeEveryHour" placeholder="mm分">
                </div>
            </div>
        </form>
    </blockquote>
</div>